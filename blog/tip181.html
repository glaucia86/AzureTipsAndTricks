<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tip 181 - Taking a peek at Azure Key Vault Part 2 of 2 | Azure Tips and Tricks</title>
    <meta name="description" content="">
    <link rel="apple-touch-icon" sizes="57x57" href="/AzureTipsAndTricks/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/AzureTipsAndTricks/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/AzureTipsAndTricks/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/AzureTipsAndTricks/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/AzureTipsAndTricks/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/AzureTipsAndTricks/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/AzureTipsAndTricks/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/AzureTipsAndTricks/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/AzureTipsAndTricks/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/AzureTipsAndTricks/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/AzureTipsAndTricks/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/AzureTipsAndTricks/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/AzureTipsAndTricks/favicon-16x16.png">
  <link rel="manifest" href="/AzureTipsAndTricks/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
    <link rel="preload" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css" as="style"><link rel="preload" href="/AzureTipsAndTricks/assets/js/app.4ad717d9.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/95.2df3ecbc.js" as="script"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/10.f02de62f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/100.b811e891.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/101.f21aa11e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/102.fc6d4989.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/103.ec00b13d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/104.75cd47d9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/105.1c388ee4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/106.e9b670e3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/107.cca0d31c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/108.8cb0607c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/109.53090f07.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/11.a3139a51.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/110.9efbd62b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/111.1694d48b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/112.b2727ad2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/113.0bfa789f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/114.ba69c74a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/115.294f2e2f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/116.1bb5df9e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/117.c3b9daba.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/118.66c0f798.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/119.6eae417a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/12.077a1d68.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/120.13600fb6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/121.3c45e757.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/122.b226fb7a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/123.ddb43aca.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/124.0b9cd51b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/125.0ccecf2f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/126.7fc1785d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/127.ba597d55.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/128.37f9dd75.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/129.b7b4815e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/13.cc5238aa.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/130.076605e3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/131.700d1b3a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/132.50317447.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/133.e9188055.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/134.5493a8af.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/135.c8c8c08f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/136.5de671d1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/137.8d045de2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/138.d3a729df.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/139.d16a73e2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/14.1925053d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/140.f4fb2653.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/141.5558a70a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/142.89290bc6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/143.7fc901b7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/144.44048358.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/145.00abb7f1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/146.f18ca062.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/147.c30b6d5b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/148.bb305cfd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/149.16b77e83.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/15.5c1178ab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/150.fb27dfa7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/151.e592047a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/152.5932c1be.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/153.0c87bf7c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/154.37111eaa.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/155.8ecdb451.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/156.deeb4d4c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/157.812dda89.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/158.814697ac.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/159.21d75ef9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/16.58afd3ae.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/160.1ecb9da1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/161.f0176891.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/162.496fbf98.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/163.6d9915ed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/164.d68ef258.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/165.2b5436ed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/166.82d61ce4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/167.042ea372.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/168.a181e498.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/169.53b28222.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/17.f1751be4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/170.2682bf7f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/171.ae172f3d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/172.88cd5584.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/173.781eea0c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/174.71ab666a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/175.8e14e024.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/176.f5838e09.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/177.aa08ad32.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/178.208c4a66.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/179.a126ac6a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/18.238cec9f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/180.21e60257.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/181.0628fb75.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/182.7381d7ee.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/183.4bf5d6c3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/184.5c2e1411.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/185.a2914071.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/186.50d74501.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/187.68f1fdbe.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/188.db12543c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/189.3d6d90cc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/19.a8d2c474.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/190.275c3e32.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/191.3b04d25c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/192.5627b7f8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/193.6e9ed402.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/194.ea031327.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/195.458802f2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/196.0d6284ab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/197.15917694.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/198.0a3f5c68.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/199.6d327baa.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/20.b2d9027b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/200.efc65572.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/201.7c033d0b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/202.232b0ab9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/203.653057dc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/204.1a0bf53a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/205.1a2e0845.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/206.583ded9d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/207.06ba6b63.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/208.4057bee1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/209.f2bc415e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/21.fce2a59e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/210.9a8dd46c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/211.4e5f4ec9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/212.87038153.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/213.7bd65cab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/214.60359f5d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/215.a30b2177.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/216.d86e1482.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/217.4f1be7ba.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/218.f95e399d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/219.da086557.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/22.17f9c8d2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/220.4fba56f8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/221.806de2b9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/222.4b2c2999.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/223.65b56d78.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/224.036d5cc9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/225.9ec41813.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/226.5eb0425f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/227.8157d29b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/228.5fa5c473.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/229.30ad631d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/23.82c68b8a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/230.c9c42275.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/231.50eb12c1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/232.f8a2646e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/233.47d50638.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/234.5085bdfe.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/235.d6eefb90.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/24.14d27277.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/25.76417694.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/26.4287bd58.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/27.e4b6714e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/28.5635f6e4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/29.61adab5c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/3.5ca0f648.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/30.3fc9ebb1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/31.0963448a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/32.8c144ef1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/33.d511a7cf.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/34.2855b7af.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/35.136a881a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/36.d37ec740.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/37.81a794b0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/38.f4d4212e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/39.e9b850b0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/40.14b2a329.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/41.94037173.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/42.e2f35e97.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/43.929a0ab3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/44.ac4b96ca.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/45.80a75b1c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/46.b27c50cf.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/47.fa89074e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/48.e529af71.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/49.f5a61582.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/5.b32c499c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/50.c07cb65b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/51.1648bd4a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/52.a777e14f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/53.98ad6c94.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/54.915dfa26.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/55.f51a7fb3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/56.f51f84d9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/57.fbb3ce00.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/58.48d1b422.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/59.7c11f7e9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/6.c702ed47.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/60.04c9b438.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/61.5c27f1eb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/62.06e3e40c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/63.cf6b995f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/64.d60584e7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/65.926e2b17.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/66.18a72721.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/67.3f8b2822.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/68.4f42c7a5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/69.651100f9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/7.ee00b141.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/70.94263ba6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/71.a6fe10e2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/72.d2e8ccbb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/73.b63d0534.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/74.e42ec8c2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/75.81869b11.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/76.b698fc60.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/77.b3dd211b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/78.165ece1c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/79.899822ae.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/8.abf1f703.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/80.83a0b870.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/81.bc8f3dc0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/82.d489ff5e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/83.68e6a005.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/84.6b380736.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/85.04b610dd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/86.7c33798d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/87.292845cd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/88.8bb49a65.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/89.45df651f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/9.1b660de3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/90.a5afef77.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/91.b3126869.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/92.2e1859a4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/93.3f069468.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/94.e68ea7cc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/96.486b19d9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/97.369e9ef4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/98.75f7d1ea.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/99.d7dcfa71.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/vendors~docsearch.9a8918f9.js">
    <link rel="stylesheet" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AzureTipsAndTricks/" class="home-link router-link-active"><img src="/AzureTipsAndTricks/files/vintage.png" alt="Azure Tips and Tricks" class="logo"> <span class="site-name can-hide">Azure Tips and Tricks</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://twitch.tv/mbcrump" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Live Streaming
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://twitch.tv/mbcrump" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Live Streaming
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/" class="sidebar-link">Welcome</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Tips</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Recently Added</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip232.html" class="sidebar-link">Tip 232 - Assess and migrate web apps to Azure with Azure Migrate</a></li><li><a href="/AzureTipsAndTricks/blog/tip231.html" class="sidebar-link">Tip 231 - Top three things for Azure developers to watch at Microsoft Ignite 2019</a></li><li><a href="/AzureTipsAndTricks/blog/tip230.html" class="sidebar-link">Tip 230 - Part 3 - Use Azure Dev Spaces to collaborate with a team on Kubernetes</a></li><li><a href="/AzureTipsAndTricks/blog/tip229.html" class="sidebar-link">Tip 229 - Part 2 - Develop multi-service applications on Kubernetes with Azure Dev Spaces</a></li><li><a href="/AzureTipsAndTricks/blog/tip228.html" class="sidebar-link">Tip 228 - Part 1 - Get started with .NET Core on Kubernetes with Azure Dev Spaces</a></li><li><a href="/AzureTipsAndTricks/blog/tip227.html" class="sidebar-link">Tip 227 - Add and run JavaScript code snippets by using inline code in Azure Logic Apps</a></li><li><a href="/AzureTipsAndTricks/blog/tip226.html" class="sidebar-link">Tip 226 - How to enable Accelerated Networking in existing Azure Virtual Machines?</a></li><li><a href="/AzureTipsAndTricks/blog/tip225.html" class="sidebar-link">Tip 225 - Learn how to share your Azure Blob Storage securely with Azure Data Share</a></li><li><a href="/AzureTipsAndTricks/blog/tip224.html" class="sidebar-link">Tip 224 - How do I add a new CIDR to an existing Virtual Network</a></li><li><a href="/AzureTipsAndTricks/blog/tip223.html" class="sidebar-link">Tip 223 - Azure REST APIs with Postman</a></li><li><a href="/AzureTipsAndTricks/blog/tip222.html" class="sidebar-link">Tip 222 - Get started with Azure App Configuration for your ASP.NET Core app</a></li><li><a href="/AzureTipsAndTricks/blog/tip221.html" class="sidebar-link">Tip 221 - Use Blazor and C# to host a static website in Azure Storage</a></li><li><a href="/AzureTipsAndTricks/blog/tip220.html" class="sidebar-link">Tip 220 - Move your data from AWS S3 to Azure Blob Storage using AzCopy</a></li><li><a href="/AzureTipsAndTricks/blog/tip219.html" class="sidebar-link">Tip 219 - Open Source RDBMS Databases in Azure</a></li><li><a href="/AzureTipsAndTricks/blog/tip218.html" class="sidebar-link">Tip 218 - Build and deploy your first app with the Azure SDK for Java on Azure</a></li><li><a href="/AzureTipsAndTricks/blog/tip217.html" class="sidebar-link">Tip 217 - Getting Started with Azure Databricks</a></li><li><a href="/AzureTipsAndTricks/blog/tip216.html" class="sidebar-link">Tip 216 - How to deploy ASP.NET application to Docker Hub and Azure</a></li><li><a href="/AzureTipsAndTricks/blog/tip215.html" class="sidebar-link">Tip 215 - Reusing Network Service Groups across Virtual Machines</a></li><li><a href="/AzureTipsAndTricks/blog/tip214.html" class="sidebar-link">Tip 214 - Explicitly Name Logic API Connections</a></li><li><a href="/AzureTipsAndTricks/blog/tip213.html" class="sidebar-link">Tip 213 - Working with the Azure billing and cost management API</a></li><li><a href="/AzureTipsAndTricks/blog/tip212.html" class="sidebar-link">Tip 212 - How to restore accidental deletion of your Azure Storage Blobs</a></li><li><a href="/AzureTipsAndTricks/blog/tip211.html" class="sidebar-link">Tip 211 - Working with Azure Functions using PowerShell (Preview)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/AzureTipsAndTricks/blog/tip210.html" class="sidebar-link">Tip 210 - Working with Azure Blueprints</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>App Service</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>APIM</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Authentication</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>AzCopy</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Blueprints</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CDN</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CLI</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cloud Shell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cognitive Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Containers</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cosmos DB</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Front Door</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Functions</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HD Insight</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>iOS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>IoT</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Key Vault</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip180.html" class="sidebar-link">Tip 180 - Taking a peek at Azure Key Vault Part 1 of 2</a></li><li><a href="/AzureTipsAndTricks/blog/tip181.html" class="active sidebar-link">Tip 181 - Taking a peek at Azure Key Vault Part 2 of 2</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Logic Apps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Machine Learning</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Media Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Monitor</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Portal</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>PowerShell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Productivity</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SAP</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SDKs</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SendGrid</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SignalR</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SQL</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Storage</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Virtual Machines</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>VNET</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page" data-v-0e4468e2> <div class="content default" data-v-0e4468e2><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>💡 Learn more : <a href="https://docs.microsoft.com/azure/key-vault?WT.mc_id=azure-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Key Vault Documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h4 id="taking-a-peek-at-azure-key-vault-part-2-of-2"><a href="#taking-a-peek-at-azure-key-vault-part-2-of-2" aria-hidden="true" class="header-anchor">#</a> Taking a peek at Azure Key Vault Part 2 of 2</h4> <p>In the <a href="/AzureTipsAndTricks/blog/tip180.html">previous post</a>, you set up Key Vault and added a secret via the Azure portal. Now you'll see how to securely access that secret programmatically. Let's start by creating a ASP.NET Core API app in Visual Studio (or you can <a href="https://github.com/mbcrump/azure-key-vault?WT.mc_id=github-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">grab the completed project here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>):</p> <img src="/AzureTipsAndTricks/files/new-api-app.png"> <p>After the project is generated, add a new controller file called <strong>SecretController.cs</strong> with the following code.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Mvc<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> KeyVaultApi<span class="token punctuation">.</span>Controllers
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token class-name">Route</span><span class="token punctuation">(</span><span class="token string">&quot;secret&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token class-name">ApiController</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecretController</span> <span class="token punctuation">:</span> <span class="token class-name">ControllerBase</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// GET api/values</span>
        <span class="token punctuation">[</span><span class="token class-name">HttpGet</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name">IActionResult</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">string</span> secret <span class="token operator">=</span> <span class="token string">&quot;TBD&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> Secret <span class="token operator">=</span> secret <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>As you might expect, the response from a browser request (or a tool like <a href="https://www.getpostman.com/" target="_blank" rel="noopener noreferrer">Postman<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) looks like:</p> <img src="/AzureTipsAndTricks/files/browser-1.png"> <p>To retrieve the secret from Key Vault, you'll want to pull in the <a href="https://www.nuget.org/packages/Microsoft.Azure.KeyVault?WT.mc_id=nuget-azuredevtips-micrum" target="_blank" rel="noopener noreferrer"><strong>Microsoft.Azure.KeyVault</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://www.nuget.org/packages/Microsoft.Azure.Services.AppAuthentication?WT.mc_id=nuget-azuredevtips-micrum" target="_blank" rel="noopener noreferrer"><strong>Microsoft.Azure.Services.AppAuthentication</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> NuGet packages. The <strong>KeyVaultClient</strong> class is the entry point for interacting with the vault, and the client code is actually pretty simple. Here the Key Vault service name is <em>fort-knox</em> and the secret's name is <em>deep-thought</em>; you should provide the appropriate values for your service.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">async</span> Task<span class="token operator">&lt;</span>IActionResult<span class="token operator">&gt;</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">string</span> secret <span class="token operator">=</span> <span class="token string">&quot;TBD&quot;</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> kvClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyVaultClient</span><span class="token punctuation">(</span>authCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>   
	secret <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> kvClient<span class="token punctuation">.</span><span class="token function">GetSecretAsync</span><span class="token punctuation">(</span>
		<span class="token string">&quot;https://fort-knox.vault.azure.net&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;deep-thought&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Value<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> Secret <span class="token operator">=</span> secret <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>It's the authentication process (the missing implementation of <strong>authCallback</strong> in the code above) that has historically been a bit tricky; however, with <a href="https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure AD Managed Service Identity (MSI)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> it's very straightforward.</p> <p>Initialize, <strong>authCallback</strong> (right after the initialization of the <strong>secret</strong> variable) as follows:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>	<span class="token keyword">var</span> authCallback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyVaultClient<span class="token punctuation">.</span>AuthenticationCallback</span>
			<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AzureServiceTokenProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>KeyVaultTokenCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>This creates a callback method that uses the <strong>AzureServiceTokenProvider</strong> class to access Key Vault on behalf of the application, without explicit use of secrets or certificates.</p> <p>During development, if you are signed in via the <a href="https://docs.microsoft.com/cli/azure/?view=azure-cli-latest?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, the app will authenticate using that identity. Of course, that identity needs requisite (Get) access to secrets in Key Vault, but if it's the same user that set up the secret, it already has more permissions than needed.</p> <p>To set up the application to run within Azure, create a new API app in the Azure portal, and via the <strong>Managed service identity</strong> option under <strong>Settings</strong>, select <strong>On</strong> to register with Azure Active Directory. This creates a service principal that the API app can use to authenticate itself to other Azure services like Key Vault.</p> <img src="/AzureTipsAndTricks/files/msi.png"> <p>At this point, your Azure Key Vault does not have an access policy associated with this new identity, so any attempts to run the app in Azure would result in a Forbidden (403) error. To remedy, create a new policy that refers to the API app you just created (or more precisely to the MSI associated with that API app). For purposes of this exercise, the only needed operation is to get secrets from Key Vault.</p> <img src="/AzureTipsAndTricks/files/access-policy.png"> <p>Now, you can deploy the application and run it from Azure as well.</p> <img src="/AzureTipsAndTricks/files/browser-2.png"> <p>If you are building ASP.NET Core applications, you should also be aware of the Azure Key Vault configuration provider, which extends the <a href="https://docs.microsoft.com/aspnet/core/security/key-vault-configuration?view=aspnetcore-2.1?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">ASP.NET Core configuration provider<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to coalesce configuration data from multiple sources and expose it via dependency injection to your controllers.</p> <p>In the <strong>Program.cs</strong> of your ASP.NET Core application, add the following call to <strong>ConfigureAppConfiguration</strong> to first get the name of the Key Vault from standard app properties and then use the <strong>AddAzureKeyVault</strong> extension method to gather all the names of the Key Vault secrets into the <strong>IConfiguration</strong> reference. Note, because the extension <em>enumerates</em> the secrets in Key Vault, you will need to grant the MSI List as well as Get permissions on the Key Vault instance.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">IWebHostBuilder</span> <span class="token function">CreateWebHostBuilder</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>
        WebHost<span class="token punctuation">.</span><span class="token function">CreateDefaultBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">ConfigureAppConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> config<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">var</span> builtConfig <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">var</span> authCallback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyVaultClient<span class="token punctuation">.</span>AuthenticationCallback</span>
                    <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AzureServiceTokenProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>KeyVaultTokenCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> kvClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyVaultClient</span><span class="token punctuation">(</span>authCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>

                config<span class="token punctuation">.</span><span class="token function">AddAzureKeyVault</span><span class="token punctuation">(</span>
                    $<span class="token string">&quot;https://{builtConfig[&quot;</span>Vault<span class="token string">&quot;]}.vault.azure.net/&quot;</span><span class="token punctuation">,</span>
                    kvClient<span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token class-name">DefaultKeyVaultSecretManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UseStartup</span><span class="token punctuation">&lt;</span><span class="token class-name">Startup</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>The complete body of the controller then becomes</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>    <span class="token punctuation">[</span><span class="token class-name">Route</span><span class="token punctuation">(</span><span class="token string">&quot;secret&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token class-name">ApiController</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecretController</span> <span class="token punctuation">:</span> <span class="token class-name">ControllerBase</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IConfiguration</span> _config<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token function">SecretController</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> config<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _config <span class="token operator">=</span> config<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">HttpGet</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name">IActionResult</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> Secret <span class="token operator">=</span> _config<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValue</span><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;deep-thought&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>For more on this subject, <a href="https://github.com/Azure-Samples/app-service-msi-keyvault-dotnet?WT.mc_id=github-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Use Key Vault from App Service with Managed Service Identity<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on GitHub has a larger sample of using MSI to authenticate to Key Vault. Additionally, you can find <a href="https://docs.microsoft.com/azure/key-vault/key-vault-use-from-web-application?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">examples<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that cover manual application registration using client secrets and certificates; however, those techniques are no longer recommended whenever MSI can be used.</p> <p>I hope this helps someone out there!</p></div> <div class="page-edit" data-v-0e4468e2><div class="edit-link" data-v-0e4468e2><a href="https://github.com/microsoft/azuretipsandtricks/edit/master/blog/tip181.md" target="_blank" rel="noopener noreferrer" data-v-0e4468e2>Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-0e4468e2 data-v-0e4468e2><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <section class="share" data-v-0e4468e2><h2 data-v-0e4468e2>Share</h2> <a href="https://twitter.com/intent/tweet?text=Tip 181 - Taking a peek at Azure Key Vault Part 2 of 2 by @mbcrump http://azuredev.tips/blog/tip181.html" target="_blank" class="share__button" data-v-0e4468e2><i class="fab fa-twitter" data-v-0e4468e2></i> Tweet
    </a></section></div> <!----></div> <div class="page-nav" data-v-0e4468e2><p class="inner" data-v-0e4468e2><span class="prev" data-v-0e4468e2>
        ←
        <a href="/AzureTipsAndTricks/blog/tip180.html" class="prev" data-v-0e4468e2>
          Tip 180 - Taking a peek at Azure Key Vault Part 1 of 2
        </a></span> <span class="next" data-v-0e4468e2><a href="/AzureTipsAndTricks/blog/tip230.html" data-v-0e4468e2>
          Tip 230 - Part 3 - Use Azure Dev Spaces to collaborate with a team on Kubernetes
        </a>
        →
      </span></p></div> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/AzureTipsAndTricks/assets/js/app.4ad717d9.js" defer></script><script src="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" defer></script><script src="/AzureTipsAndTricks/assets/js/95.2df3ecbc.js" defer></script>
  </body>
</html>
